!function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,e){return(n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,e)}function e(t,e){return n(t,e)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function r(t,n,e){return(r=o()?Reflect.construct:function(t,n,e){var o=[null];o.push.apply(o,n);var r=new(Function.bind.apply(t,o));return e&&_setPrototypeOf(r,e.prototype),r}).apply(null,arguments)}function i(t,n,e){return r.apply(null,arguments)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t){return a(t)}function u(t){var n="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||(o=t,-1===Function.toString.call(o).indexOf("[native code]")))return t;var o;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return i(t,arguments,c(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e(r,t)},u(t)}function l(t,n){return!n||"object"!=((e=n)&&e.constructor===Symbol?"symbol":typeof e)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n;var e}function s(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,o=c(t);if(n){var r=c(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return l(this,e)}}var f={opacity:"opacity",color:"color",margin:"margin",gutters:"gutters",width:"width",disabled:"disabled",controller:"controller"},p=function(){var t=4;return window.matchMedia("(min-width: 450px)").matches&&(t=8),window.matchMedia("(min-width: 1024px)").matches&&(t=12),t},d=function(t,n){var e=document.createElement(t);return e.classList.add(n),e},h=function(n){"use strict";!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}(c,n);var o,r,i,a=s(c);function c(){var t;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).option=Object.seal({opacity:.3,color:"rgb(165, 165, 255)",margin:"16px",gutters:"16px",width:"1200px",controller:!1,disabled:!1}),t.columns=p(),t.shadow=Object.seal(t.attachShadow({mode:"open"})),t}return o=c,i=[{key:"observedAttributes",get:function(){return Object.keys(f)}}],(r=[{key:"attributeChangedCallback",value:function(t,n,e){var o=n!==e;"controller"===t&&o&&(e=this.getValidControllerValue(e)),o&&(this.option[t]=e)}},{key:"connectedCallback",value:function(){this.observe(document.body)}},{key:"reset",value:function(){this.shadowRoot&&(this.shadowRoot.innerHTML="")}},{key:"observe",value:function(t){var n=this;new ResizeObserver((function(){n.reset(),n.setContent()})).observe(t)}},{key:"setControllerClick",value:function(t,n){var e=this;t.onclick=function(){e.option.disabled?e.removeAttribute("disabled"):e.setAttribute("disabled","true"),n.classList.toggle("hidden")}}},{key:"updateStyle",value:function(){var t=this.shadow.querySelector("style");return t||(t=document.createElement("style")),t.textContent="\n        .grid-controller {\n          display: ".concat(this.option.controller?"initial":"none",";\n          position: fixed;\n          top: -.5rem;\n          left: 50%;\n          transform: translate3d(-50%, -50%, 0);\n          height: 40px;\n          width: 80px;\n          border-radius: .5rem;\n          cursor: pointer;\n          pointer-events: all;\n          border: 0;\n          isolation: isolate;\n          box-shadow: inset 0 0 2px 2px ").concat(this.option.color,";\n          transition: transform .15s ease-in-out;\n        }\n\n        .grid-controller:active {\n          transform: translate3d(-50%, -45%, 0);\n        }\n\n        .grid-overlay-container {\n          box-sizing: border-box;\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100vw;\n          height: 100vh;\n          padding-left: ").concat(this.option.margin,";\n          padding-right: ").concat(this.option.margin,";\n          opacity: ").concat(this.option.opacity,";\n          pointer-events: none;\n          transform: translateY(0);\n          transition: all .15s ease-in-out;\n        }\n\n        .grid-overlay {\n          width: 100%;\n          height: 100%;\n          max-width: ").concat(this.option.width,";\n          margin: auto;\n          display: grid;\n          grid-template-columns: repeat(").concat(this.columns,", 1fr);\n          gap: ").concat(this.option.gutters,";\n          transition: all .15s ease-in-out;\n        }\n\n        .hidden {\n          opacity: 0;\n        }\n\n        .grid-overlay span {\n          background: conic-gradient(from 80deg at 30% 110%, #ffffff, ").concat(this.option.color,");\n          box-shadow: inset 0 0 2px #000;\n        }"),t}},{key:"setContent",value:function(){var t=function(){var t=d("span","grid-overlay-container"),n=d("span","grid-overlay"),e=d("button","grid-controller");t.append(n);for(var o=p();o>0;o--){var r=document.createElement("span");n.appendChild(r)}return{container:t,controller:e}}(),n=t.container,e=t.controller;this.columns=p(),this.setControllerClick(e,n);var o=this.updateStyle();this.shadow.append(o,n,e)}},{key:"start",value:function(){document.querySelector("grid-overlay")||document.body.appendChild(this)}},{key:"setOpacity",value:function(t){this.option.opacity=t}},{key:"setColor",value:function(t){this.option.color=t}},{key:"setWidth",value:function(t){this.option.width=t}},{key:"setMargin",value:function(t){this.option.margin=t}},{key:"setGutters",value:function(t){this.option.gutters=t}},{key:"setController",value:function(t){this.option.controller=(null==t?void 0:t.toString())||""}},{key:"getValidControllerValue",value:function(t){return console.log(t),""===t||JSON.parse(t)}}])&&t(o.prototype,r),i&&t(o,i),c}(u(HTMLElement));customElements.define("grid-overlay",h);new h}();
//# sourceMappingURL=index.js.map
